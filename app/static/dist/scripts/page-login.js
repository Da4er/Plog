!function(n){function o(e){if(t[e])return t[e].exports;var r=t[e]={exports:{},id:e,loaded:!1};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var t={};return o.m=n,o.c=t,o.p="",o(0)}([function(n,o,t){"use strict";function e(n){var o=/^[A-Za-z][A-Za-z0-9_]{4,}$/;return o.test(n)}function r(n){var o=/^[\S]{6,}$/;return o.test(n)}function a(){return e(l.val())?r(d.val())?!0:(console.log("password invalid"),!1):(l.focus(),console.log("username invalid"),!1)}var i=t(1),c=t(2),u=window.location.protocol+"//"+window.location.host,s=u+"/api/v1.0/login",l=i("input#username"),d=i("input#password"),f=i("button#login-btn");i(function(){i.each([l,d],function(){i(this).keyup(function(){a()?f.prop("disabled",!1):f.prop("disabled",!0)})})}),i(document).ready(function(){setTimeout(function(){d.val("")},100)}),i(function(){f.on("click",function(){var n=l.val(),o=d.val();i.ajax({method:"POST",url:s,data:{username:n,password:o},dataType:"json",timeout:3e4,beforeSend:function(){f.prop("disabled",!0).text("登录中...")},error:function(){d.val(""),f.text("登录").prop("disabled",!0)},success:function(n){console.log(n),console.log(c.getUrlPara("redirect")),n.success&&1==n.success?(f.text("登录成功"),setTimeout(function(){var n=c.getUrlPara("redirect")?u+decodeURIComponent(c.getUrlPara("next")):u;window.location.href=n},1500)):(d.val(""),f.text("登录").prop("disabled",!0),alert(n.message))}}).done(function(){f.text("登录")})})})},function(n,o){n.exports=jQuery},function(n,o,t){"use strict";var e=t(1);e(function(){e("a.login-link").on("click",function(n){n.preventDefault();var o=e(this).attr("href");o=o+"?redirect="+encodeURIComponent(window.location.pathname),window.location.href=o}),e("[data-focus]").on("focus",function(){e(e(this).data("focus")).slideDown()}).on("blur",function(){e(e(this).data("focus")).slideUp()})}),o.getUrlPara=function(n,o){o||(o=window.location.href),n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+n+"=([^&#]*)",e=new RegExp(t),r=e.exec(o);return null==r?null:r[1]}}]);