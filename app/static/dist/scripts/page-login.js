!function(n){function e(t){if(o[t])return o[t].exports;var r=o[t]={exports:{},id:t,loaded:!1};return n[t].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=n,e.c=o,e.p="",e(0)}([function(n,e,o){"use strict";function t(n){var e=/^[A-Za-z][A-Za-z0-9_]{4,}$/;return e.test(n)}function r(n){var e=/^[\S]{6,}$/;return e.test(n)}function a(){return t(s.val())?r(d.val())?!0:(console.log("password invalid"),!1):(s.focus(),console.log("username invalid"),!1)}var i=o(1),c=o(2),l=window.location.protocol+"//"+window.location.host,u=l+"/api/v1.0/login",s=i("input#username"),d=i("input#password"),p=i("button#login-btn");i(function(){i.each([s,d],function(){i(this).keyup(function(){a()?p.prop("disabled",!1):p.prop("disabled",!0)})})}),i(document).ready(function(){setTimeout(function(){d.val("")},100)}),i(function(){p.on("click",function(){var n=s.val(),e=d.val();i.ajax({method:"POST",url:u,data:{username:n,password:e},dataType:"json",timeout:3e4,beforeSend:function(){p.prop("disabled",!0).text("登录中...")},error:function(){d.val(""),p.text("登录").prop("disabled",!0)},success:function(n){console.log(n),console.log(c.getUrlPara("redirect")),n.success&&1==n.success?(p.text("登录成功"),setTimeout(function(){var n=c.getUrlPara("redirect")?l+decodeURIComponent(c.getUrlPara("next")):l;window.location.href=n},1500)):(d.val(""),p.text("登录").prop("disabled",!0),alert(n.message))}}).done(function(){p.text("登录")})})})},function(n,e){n.exports=jQuery},function(n,e,o){"use strict";var t=o(1);t(function(){t("a.login-link").on("click",function(n){n.preventDefault();var e=t(this).attr("href");e=e+"?redirect="+encodeURIComponent(window.location.pathname),window.location.href=e})}),e.getUrlPara=function(n,e){e||(e=window.location.href),n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o="[\\?&]"+n+"=([^&#]*)",t=new RegExp(o),r=t.exec(e);return null==r?null:r[1]}}]);